---
title: LiveData
author: Junyoung Kim
date: 2021-09-10
category: Android
layout: post
---


Livedata 포스팅하려고 [밑밥](https://junieberry.github.io/android/2021-09-09-ObserverPattern.html) 깔았다... 

## LiveData

LiveData는 Jetpack 구성 요소 중 하나로, observable한 Data holder 클래스이다. [옵저버 패턴](https://junieberry.github.io/android/2021-09-09-ObserverPattern.html)에서의 Subject와 같으며, LiveData를 Observer는 액티비티나 프래그먼트, 서비스 등이다. LiveData의 특별한 점은, LiveData는 자신의 Observer들의 lifecycle을 알고 있다는 점이다. 
따라서 이벤트가 발생했을때 lifecycle이 active한 Observer, 즉 lifecycle이 `STARTED` 이거나 `RESUMED` 상태인 Observer들만 컴포넌트를 업데이트한다. 또한 만약 lifecycle이 `DESTROYED`가 되면 LiveData가 해당 Observer를 삭제한다. 따라서 LiveData의 Observer들은 메모리 릭을 걱정하지 않아도 된다.

그런데 LiveData는 Observer들의 lifecycle을 대체 어떻게 아는걸까?🤨 [LifecycleOwner](https://developer.android.com/reference/androidx/lifecycle/LifecycleOwner)가 바로 LiveData에게 Observer을 알려주는 주인공이다!

> 🚀Jetpack은 안드로이드 개발자들을 위한 라이브러리들의 모음집이다. Jetpack은 기존 안드로이드 플랫폼 API와 별개로 androidx라는 이름으로 패키지 되어있다. 그 중 Livedata는 Data Binding, Lifecycles, Room, ViewModel 등과 함께 Jectpack의 Architecture 파트를 구성하고 있다.

### LifecycleOwner
LifecycleOwner는 안드로이드 생명주기를 갖고 있는 인터페이스이다!

```kotlin
abstract getLifecycle: Lifecycle ()
```
`getLifecycle` 메서드는 provider의 생명주기를 반환해준다.  LifecycleOwner을 구현한 객체 `getLifecycle` 메서드를 사용해 내부에서 다른 코드를 구현하지 않아도 생명주기를 관리할 수 있다.

---

## LiveData를 사용하면..

1️⃣ **Ensures your UI matches your data state**
LiveData는 옵저버 패턴을 따르기 때문에 data에 변화가 생기면 data를 관찰하고 있는 UI들이 자동으로 업데이트 된다. 

2️⃣ **No memory leaks**
LiveData는 Observer의 생명주기를 알고 있기 때문에 생명주기가 끝난 Observer는 LiveData의 Observer List에서 삭제된다. 만약 생명주기가 끝난 Observer도 LiveData가 갖고 있다면 메모리 낭비..!

3️⃣ **No crashes due to stopped activities**

4️⃣ **No more manual lifecycle handling**

5️⃣ **Always up to date data**

6️⃣ **Proper configuration changes**
기기 방향 전환 같이 액티비티나 프레그먼트가 다시 호출되는 경우에도 즉시 최신 데이터를 불러온다.

7️⃣ **Sharing resources**
LiveData를 싱글톤 패턴으로 사용해서 어디에서나 사용할 수 있다.


---

## LiveData 사용해보기

1️⃣ **Create LiveData**

2️⃣**Observe LiveData**
안드로이드 내에서 중복을 방지하기 위해 `onResume()` 보다는 `onCreate()`에서 호줄해준다.
이미 Observed 된 후에는, 컴포턴트가 `STARTED` 상태가 된 즉시 Observe하고 있는 LiveData의 최신 값을 가져온다.

3️⃣ **Update LiveData** 

LiveData는 혼자 쓰기 보단 Databinding, ViewModel, Room 등과 같이 쓸 때 시너지를 발휘한다!


### Ref
[LiveData Overview](https://developer.android.com/topic/libraries/architecture/livedata)
[# [Android] LiveData...넌 누구냐?](https://velog.io/@jojo_devstory/Android-LiveData...%EB%84%8C-%EB%88%84%EA%B5%AC%EB%83%90)
[# Jetpack Android — LiveData 알아보기](https://medium.com/harrythegreat/jetpack-android-livedata-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-ed49a6f17de3)
[# Android LiveData의 사용법과 내부 코드를 통한 UI 처리, 중복 처리 등 살펴보기](https://thdev.tech/android/2021/02/01/LiveData-Intro/)
[# [Android] LiveData + ViewModel 사용해보기](https://junghun0.github.io/2019/05/22/android-viewmodel/)